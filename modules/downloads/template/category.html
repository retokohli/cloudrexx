


<script language="javascript">
  // <![CDATA[

    function selectLang(lang){

      ObjChecked = document.getElementById("CatLanguage_"+lang).checked;
      if(ObjChecked){
        //document.getElementById("LangTab_"+lang).style.display = 'block';
        //document.getElementById("tabNavi_"+lang).style.display = 'block';
      }

    }

    function newsGetFileBrowser(elInsertBox, sType)
    {
      newsElInsertBox = elInsertBox;
      newsElType = sType;

      if (sType == 'link') {
        newsElLinkText = prompt('', '');
        if (newsElLinkText == null) {
          return false;
        }
      }

      if (sType == 'webpages') {
        openWindow('?cmd=fileBrowser&standalone=true&type=webpages','','width=800,height=600,resizable=yes,status=no,scrollbars=yes');
      } else {
        openWindow('?cmd=fileBrowser&standalone=true','','width=800,height=600,resizable=yes,status=no,scrollbars=yes');
      }
    }

    function openWindow(theURL,winName,features){
      galleryPopup = window.open(theURL,"gallery",features);
      galleryPopup.focus();
    }

    function SetUrl(url, width, height, alt) {
      switch (newsElType) {
      case 'image':
      case 'webpages':
        document.getElementById(newsElInsertBox).value = url;
        break
      case 'link':
        if (newsElLinkText == '') {
          newsElLinkText = url;
        }
        newsInsertLink(document.getElementById(newsElInsertBox), '<a href="'+url+'">'+newsElLinkText+'</a>');
        break;
      }
    }

    /* ----------------------------------------- */


    arrTabToDiv = new Array();
    {JS_ARR}

    function switchBoxAndTab(objElement, strTabId) {

      if (countActiveLanguages() == 0) {
        //We just "unchecked" the last language, disallow this
        objElement.checked = true;
      } else {
        //There are more active languages, hide the tab
        switchTabVisibility(strTabId);
      }

      //Now make sure that a possible div is shown
      activateAnyActiveDiv();
    }

    function switchTabVisibility(strTabId) {
      if (document.getElementById(strTabId).style.display == 'none') {
        document.getElementById(strTabId).style.display = 'inline';
      } else {
        document.getElementById(strTabId).style.display = 'none';
      }
    }


    function countActiveLanguages() {
      var activeLanguages = 0;

      for (var h=0; h < document.forms.length;h++) {
        for (var i=0; i < document.forms[h].elements.length;i++) {
          //read out all form-elements with the loop
          if(document.forms[h].elements[i].name.search('frmEditEntry_Languages') != -1) {
            if(document.forms[h].elements[i].checked) {
              activeLanguages++;
            }
          }
        }
      }

      return activeLanguages;
    }

    function activateAnyActiveDiv() {
      //Deactivate every div first first
      for (var TabName in arrTabToDiv) {
        document.getElementById(TabName).className = 'inactive';
        document.getElementById(arrTabToDiv[TabName]).style.display = 'none';
      }

      //Activate the first possible div with an acitvated checkbox
      for (var TabName in arrTabToDiv) {
        if (document.getElementById(TabName).style.display == 'inline') {
          document.getElementById(TabName).className = 'active';
          document.getElementById(arrTabToDiv[TabName]).style.display = 'inline';
          break;
        }
      }
    }

  // ]]>
</script>

<div id="EditCategory">
  <form name="EditCategoryForm" action="index.php?cmd=downloads&act=categories" method="post">
  <input type="hidden" name="mode" value="update" />
  <input type="hidden" name="category" value="{VALUE_ID}" />
  <table class="adminlist" align="top" border="0" cellpadding="3" cellspacing="0" width="100%">
    <tr>
      <th colspan="2">{TXT_DOWNLOADS_EDIT_CATEGORY}</th>
    </tr>
  </table>
  <br />
  {LANG_TAB_NAVI}
  {LANG_TABS}
  <br />
  <table class="adminlist" align="top" border="0" cellpadding="3" cellspacing="0" width="100%">
    <tr class="row1">
      <td width="200">{TXT_AUTHOR}</td>
      <td><input name="category_author" style="width: 30%;" value="{VALUE_AUTHOR}" type="text" /></td>
    </tr>
    <tr class="row1">
      <td>{TXT_IMAGE}</td>
      <td><input name="category_image" id="category_image" style="width: 30%;" value="{VALUE_IMG}" type="text" />&nbsp;<input value="{TXT_BROWSE}" onclick="newsGetFileBrowser('category_image', 'image')" type="button" /></td>
    </tr>
    <!--
    <tr class="row1">
      <td>{TXT_DOWNLOADS_PERMISSIONS}</td>
      <td>{GROUP_SELECT}</td>
    </tr>
    <tr class="row1">
      <td>{TXT_LANGUAGES}</td>
      <td>
        <table border="0" cellpadding="3" cellspacing="0">
          <tr class="row1">{LANG_SELECT}</tr>
        </table>
      </td>
    </tr>
    -->
  </table>

  <input type="submit" value="{TXT_SAVE}" />
  </form>
</div>

<script language="javascript">
  // <![CDATA[
  {JS_HIDE}
  // ]]>
</script>
